//- //Для добавления мобильной версии картинки добавляем вторым параметром true
//- //Например +picture('image.jpg', 'true')
//- //Миксин будет искать картинку с названием image-mob.jpg (тоесть вторая картинка должна иметь такое же название как и основная, только с добавлением -mob.png/jpg и тд)

mixin picture(fileName, isMobileFileName)
  -
    var file = {
      getTitle(filename) {
        var segments = filename.split('.');
        segments.pop();
        return segments.join('.');
      },
      getExtension(filename) {
        return filename.split('.').pop();
      },
      getPath(title, extension) {
        return `../../images/${title}.${extension}`;
      },
    };
    var fileTitle = file.getTitle(fileName);
    var fileExtension = file.getExtension(fileName);

  picture.picture&attributes(attributes)
    if isMobileFileName
      source.lazyload(
        type='image/webp',
        srcset=`${file.getPath(fileTitle + '-mob', "webp")} `,
        media='(max-width: 768px)'
      )
      if fileExtension === 'png'
        source.lazyload(
          type='image/png',
          srcset=`${file.getPath(fileTitle + '-mob', "png")} `,
          media='(max-width: 768px)'
        )
      else
        source.lazyload(
          type='image/jpeg',
          srcset=`${file.getPath(fileTitle + '-mob', "jpg")} `,
          media='(max-width: 768px)'
        )

    source.lazyload(type='image/webp', srcset=`${file.getPath(fileTitle, "webp")} `)
    if fileExtension === 'png'
      source.lazyload(type='image/png', srcset=`${file.getPath(fileTitle, "png")} `)
    else
      source.lazyload(type='image/jpeg', srcset=`${file.getPath(fileTitle, "jpg")} `)

    img.picture__img.lazyload(
      src=`${file.getPath(fileTitle, fileExtension)}`,
      data-src=`${file.getPath(fileTitle, fileExtension)}`,
      alt=fileName
    )
